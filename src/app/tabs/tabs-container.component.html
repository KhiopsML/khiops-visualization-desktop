<div class="tabs-wrapper" *ngIf="tabs.length !== 0">
  <div #tabsElement class="chrome-tabs">
    <div
      *ngFor="let tab of tabs"
      [attr.data-tab-id]="tab.id"
      class="chrome-tab"
      [class.chrome-tab-active]="isTabActive(tab.id)"
      (click)="switchTab(tab.id)"
    >
      <img
        class="chrome-tab-icon"
        [src]="getTabIcon(tab.componentType)"
        [alt]="tab.componentType"
      />
      <div class="chrome-tab-title">{{ tab.title }}</div>
      <button
        class="tab-close-btn"
        (click)="closeTab(tab.id); $event.stopPropagation()"
        aria-label="Close tab"
        type="button"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="icon-close"
          style="width: 16px; height: 16px"
        >
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </button>
    </div>
  </div>
  <button
    class="tab-add-btn"
    (click)="openFileDialog()"
    aria-label="Open file"
    type="button"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
      style="width: 16px; height: 16px"
    >
      <line x1="12" y1="5" x2="12" y2="19" />
      <line x1="5" y1="12" x2="19" y2="12" />
    </svg>
  </button>
</div>

<app-big-file-loading></app-big-file-loading>

<div class="tab-content">
  <div *ngIf="tabs.length === 0">Open a file from the menu</div>

  <ng-container *ngFor="let tab of tabs; trackBy: trackByTabId">
    <khiops-visualization
      *ngIf="tab.componentType === 'visualization'"
      [attr.data-tab-id]="tab.id"
      [style.display]="activeTabId === tab.id ? 'block' : 'none'"
      style="width: 100%; height: 100%"
    >
    </khiops-visualization>
    <khiops-covisualization
      *ngIf="tab.componentType === 'covisualization'"
      [attr.data-tab-id]="tab.id"
      [style.display]="activeTabId === tab.id ? 'block' : 'none'"
      style="width: 100%; height: 100%"
    >
    </khiops-covisualization>
  </ng-container>
</div>
